{% extends "base.html" %}

{% block content %}
<!-- search result -->
<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="section-title text-primary">Search Results for "{{ q }}"</h2>
        {% if stocks %}
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Stock Name</th>
              <th scope="col">Ticker</th>
              <th scope="col">Current Price</th>
              <th scope="col">Daily Change</th>
            </tr>
          </thead>
          <tbody>
            {% for stock in stocks %}
            <tr>
              <td>{{ loop.index }}</td>
              <td>
                <a href="/data.html?q={{ stock.stock_name }}">{{ stock.stock_name }}</a>
              </td>
              <td>{{ stock.stock_code }}</td>
              <td>{{ "{:,}".format(stock.current_price) if stock.current_price else '-' }}</td>
              <td class="{{ 'text-danger' if stock.daily_change_rate and stock.daily_change_rate > 0 else 'text-primary' }}">
                {{ "{:+.2f}%".format(stock.daily_change_rate) if stock.daily_change_rate is not none else '-' }}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        {% else %}
        <p>No results found for "{{ q }}".</p>
        {% endif %}
      </div>
    </div>
  </div>
</section>
<!-- /search result -->
{% endblock %}
